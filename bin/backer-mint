#! /usr/bin/env bash

message() {
    echo
    echo ----------------------------------------------
    echo "$@"
    echo ----------------------------------------------
    echo
}

BIN_DIR=${BIN_DIR:-$(cd "${0%/*}"&&pwd)}
DEPLOY_DIR=deployments/$(seth chain)
ADDRESS_DIR=$PWD/$DEPLOY_DIR
ADDRESS_FILE="$ADDRESS_DIR/addresses.json"

message Contracts

CURRENCY=$(cat $ADDRESS_FILE | jq  -r '.CURRENCY')
COLLATERAL=$(cat $ADDRESS_FILE | jq  -r '.COLLATERAL')
LENDER=$(cat $ADDRESS_FILE | jq  -r '.LENDER')
echo "Currency: $CURRENCY"
echo "Collateral: $COLLATERAL"
echo "Lender: $LENDER"


message Mint

# 1000 Currency
AMOUNT=1000000000000000000000
AMOUNT=$(seth --to-uint256 $AMOUNT)

# give backer some currency
    seth send $CURRENCY 'mint(address,uint)' $BACKER_ETH_FROM $AMOUNT