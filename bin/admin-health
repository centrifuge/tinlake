#! /usr/bin/env bash

message() {
    echo
    echo ----------------------------------------------
    echo "$@"
    echo ----------------------------------------------
    echo
}

DEPLOY_DIR=deployments/$(seth chain)
ADDRESS_DIR=$PWD/$DEPLOY_DIR
ADDRESS_FILE="$ADDRESS_DIR/addresses.json"

message Contracts

ADMIN=$(cat $ADDRESS_FILE | jq  -r '.ADMIN')
PILE=$(cat $ADDRESS_FILE | jq  -r '.PILE')
echo "Admin: $ADMIN"
echo "Pile: $PILE"

message Permissions
echo "Admin Contract: $(seth call $ADMIN  'wards(address)(bool)' $1)"
echo "Pile Contract: $(seth call $PILE  'wards(address)(bool)' $1)"
